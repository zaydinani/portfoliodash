import { getServerSession } from "next-auth";
import { options } from "../app/api/auth/[...nextauth]/options";
import Link from "next/link";
import "../styles/sidebar.scss";
import data from "../data/data.json";

const profileSideBar = async () => {
  const session = await getServerSession(options);
  let sessionName, sessionRole;
  if (session) {
    sessionName = session?.user.name;
    sessionRole = session?.role; // Check for pre-set role in session
  }
  return (
    <div className="admin">
      <Link href="/profile">
        <img src={data["zayd-data"].about.image} alt="" />
        <p>{sessionName}</p>
      </Link>
      <Link href="/api/auth/signout?callbackUrl=/">
        <svg
          width="25"
          height="24"
          viewBox="0 0 25 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.4996 23C10.4996 23.2652 10.3942 23.5196 10.2067 23.7071C10.0192 23.8946 9.76482 24 9.4996 24H2.4996C1.96917 24 1.46046 23.7893 1.08539 23.4142C0.710317 23.0391 0.499603 22.5304 0.499603 22V2C0.499603 1.46957 0.710317 0.960859 1.08539 0.585786C1.46046 0.210714 1.96917 0 2.4996 0H9.4996C9.76482 0 10.0192 0.105357 10.2067 0.292893C10.3942 0.48043 10.4996 0.734784 10.4996 1C10.4996 1.26522 10.3942 1.51957 10.2067 1.70711C10.0192 1.89464 9.76482 2 9.4996 2H2.4996V22H9.4996C9.76482 22 10.0192 22.1054 10.2067 22.2929C10.3942 22.4804 10.4996 22.7348 10.4996 23ZM24.2071 11.2925L19.2071 6.2925C19.0195 6.10486 18.765 5.99944 18.4996 5.99944C18.2342 5.99944 17.9797 6.10486 17.7921 6.2925C17.6045 6.48014 17.499 6.73464 17.499 7C17.499 7.26536 17.6045 7.51986 17.7921 7.7075L21.0859 11H9.4996C9.23439 11 8.98003 11.1054 8.7925 11.2929C8.60496 11.4804 8.4996 11.7348 8.4996 12C8.4996 12.2652 8.60496 12.5196 8.7925 12.7071C8.98003 12.8946 9.23439 13 9.4996 13H21.0859L17.7921 16.2925C17.6045 16.4801 17.499 16.7346 17.499 17C17.499 17.2654 17.6045 17.5199 17.7921 17.7075C17.9797 17.8951 18.2342 18.0006 18.4996 18.0006C18.765 18.0006 19.0195 17.8951 19.2071 17.7075L24.2071 12.7075C24.3001 12.6146 24.3738 12.5043 24.4242 12.3829C24.4745 12.2615 24.5004 12.1314 24.5004 12C24.5004 11.8686 24.4745 11.7385 24.4242 11.6171C24.3738 11.4957 24.3001 11.3854 24.2071 11.2925Z"
            fill="#3C3C3C"
          />
        </svg>
      </Link>
    </div>
  );
};

export default profileSideBar;
